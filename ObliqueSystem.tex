\documentclass[10pt]{article}
% \usepackage[margin=1in]{geometry}
% \newcommand\hmmax{0}
% \newcommand\bmmax{0}
% % % Fonts% %
\usepackage[T1]{fontenc}
   % \usepackage{textcomp}
   % \usepackage{newtxtext}
   % \renewcommand\rmdefault{Pym} %\usepackage{mathptmx} %\usepackage{times}
\usepackage[complete, subscriptcorrection, slantedGreek, mtpfrak, mtpbb, mtpcal]{mtpro2}
   \usepackage{bm}% Access to bold math symbols
   % \usepackage[onlytext]{MinionPro}
   \usepackage[no-math]{fontspec}
   \defaultfontfeatures{Ligatures=TeX,Numbers={Proportional}}
   \newfontfeature{Microtype}{protrusion=default;expansion=default;}
   \setmainfont[Ligatures=TeX]{Minion 3}
   \setsansfont[Microtype,Scale=MatchLowercase,Ligatures=TeX,BoldFont={* Semibold}]{Myriad Pro}
   \setmonofont[Scale=0.8]{Atlas Typewriter}
   % \usepackage{selnolig}% For suppressing certain typographic ligatures automatically
   \usepackage{microtype}
% % % % % % %
\usepackage{amsthm}         % (in part) For the defined environments
\usepackage{mathtools}      % Improves  on amsmaths/mtpro2
\usepackage{amsthm}         % (in part) For the defined environments
\usepackage{mathtools}      % Improves on amsmaths/mtpro2

% % % The bibliography % % %
\usepackage[backend=biber,
  style=authoryear-comp,
  bibstyle=authoryear,
  citestyle=authoryear-comp,
  uniquename=false,%allinit,
  % giveninits=true,
  backref=false,
  hyperref=true,
  url=false,
  isbn=false,
  ]{biblatex}
\DeclareFieldFormat{postnote}{#1}
\DeclareFieldFormat{multipostnote}{#1}
% \setlength\bibitemsep{1.5\itemsep}
\newcommand{\noopsort}[1]{}
\addbibresource{Thesis.bib}

% % % % % % % % % % % % % % %

\usepackage[inline]{enumitem}
\setlist[itemize]{noitemsep}
\setlist[description]{style=unboxed,leftmargin=\parindent,labelindent=\parindent,font=\normalfont\space}
\setlist[enumerate]{noitemsep}

% % % Misc packages % % %
\usepackage{setspace}
% \usepackage{refcheck} % Can be used for checking references
% \usepackage{lineno}   % For line numbers
% \usepackage{hyphenat} % For \hyp{} hyphenation command, and general hyphenation stuff
\usepackage{subcaption}
% % % % % % % % % % % % %

% % % Red Math % % %
\usepackage[usenames, dvipsnames]{xcolor}
% \usepackage{everysel}
% \EverySelectfont{\color{black}}
% \everymath{\color{red}}
% \everydisplay{\color{black}}
% % % % % % % % % %

\usepackage{dashrule}

\newcommand{\hozline}[0]{%
  \noindent\hdashrule[0.5ex][c]{\textwidth}{.1pt}{}
  %\vspace{-10pt}
  % \noindent\rule{\textwidth}{.1pt}
}

\newcommand{\hozlinedash}[0]{%
  \noindent\hdashrule[0.5ex][c]{\textwidth}{.1pt}{2.5pt}
  %\vspace{-10pt}
}

\usepackage{pifont}
\newcommand{\hand}{\ding{43}}
\usepackage{array}


\usepackage{multirow}
\usepackage{adjustbox}

\usepackage{titlesec}

\makeatletter
\newcommand{\clabel}[2]{%
   \protected@write \@auxout {}{\string \newlabel {#1}{{#2}{\thepage}{#2}{#1}{}} }%
   \hypertarget{#1}{#2}
}
\makeatother

\usepackage{multicol}

\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}

\usepackage{tikz}
\usetikzlibrary{arrows,positioning}
\usepackage{tikz-qtree} %for simple tree syntax
% \usepgflibrary{arrows} %for arrow endings
% \usetikzlibrary{positioning,shapes.multipart} %for structured nodes
\usetikzlibrary{tikzmark}

\usepackage{graphicx} % for images (png/jpeg etc.)
\usepackage{caption} % for \caption* command


\usepackage{tabularx}

\usepackage{bussalt}

\usepackage{Oblique} % Custom package for oblique commands
\usepackage{CustomTheorems}

\usepackage{svg}
\usepackage[off]{svg-extract}
\svgsetup{clean=true}

\usepackage[hidelinks,breaklinks]{hyperref}

\title{Oblique System}
\author{Ben Sparkes}
% \date{ }


\begin{document}

\maketitle

These notes sketch out the path for a sound and complete \emph{partial} propositional modal logic which makes use of conditional box and conditional window modalities.

A partial propositional logic is simply a standard propositional logic with a partial valuation function.
Hence, a partial propositional modal logic is a propositional modal logic with a partial valuation function.

The `window' modality is used in Boolean Modal Logic (\cite[424--425]{Blackburn:2002aa}), and is effectively a standard box modality based on inaccessible worlds rather than accessible worlds.

The system is based on the partial propositional modal logic of \textcite{Jaspars:1996aa}, who axiomatize a partial modal logic with a standard box operator.
The interest of the present system (if there is any) is establishing the required interaction between the box and window modalities given a partial valuation.
We introduce conditional variants of the box and window modalities in order to capture this interaction in a partial setting.

A conditional box modality is a modality of the form \(\phi \CBox \psi\), which requires that for all accessible states, if \(\phi\) is true, then \(\psi\) is also true.
Given a complete valuation, this modality is equivalent to \(\Box(\phi \rightarrow \psi)\).
However, given a partial valuation, if neither \(\phi\) nor \(\psi\) is true, one doesn't have \(\phi \rightarrow \psi\).
Therefore, \(\psi\) being true whenever \(\phi\) is true is not simply a matter of \(\lnot\phi \lor \psi\) being true at all accessible states.

An alternative approach may be to introduce a conditional.
A difficulty here is ensuring that such a conditional is monotonic with respect to valuations extending the present evaluation.
(\cite{Blamey:2002aa,Blamey:1980aa} has some nice discussions of why monotonicity of the connectives with respect to extended valuations is of interest).
\textcite[14]{Blamey:2002aa} observes that a it is not possible to define a non-monotonic conditional in the partial system that \citeauthor{Blamey:2002aa} considers (which is slightly different from the one built on below), and I suspect it would not be hard to show that this is the case for the present system.
Indeed, it is easy to show that the conditional box modality is non-monotonic with respect to extended valuations.
E.g.\ \(p \CBox q\) is true because there are no accessible states where either \(p\) or \(\lnot p\) is defined, and there's \(p\) may be introduced by an expanded interpretation, but if \(q\) remains undefined then \(p \CBox q \) will no longer be true.

In any case, exploring whether the approach of \citeauthor{Jaspars:1996aa} could be extended to axiomatize both a box and window modality presented some interest.
And, as it did not seem possible to straightforwardly ensure the appropriate interaction between straightforward box and window modalities, extending the approach of \citeauthor{Jaspars:1996aa} to conditional modalities turned a curiosity into something of a challenge.

Finally, while the basic outline for completeness in a partial setting is provided by the work of \citeauthor{Jaspars:1996aa}, it is only be combing this with the approach of \textcite{Gargov:1987aa} to axiomatizing Boolean Modal Logic that we are able to (sketch out) a completeness proof for the desired operators.

As noted, the following is a sketch, which is likely in need of some corrections and additional axioms, but I am now quite confident that a sound and complete system can be obtained.

\section{Formalism}
\label{sec:formalism}

\begin{definition}[Frame]
  A \emph{frame} \(\oframe{F}\) is a pair \((S, R)\) where
  \begin{itemize}
  \item \(S\) is a collection of points capturing situations,
  \item \(R \subseteq S \times S\) is an accessibility relation
  \end{itemize}
\end{definition}

\begin{definition}[Propositions]
  Subsets of the collection of situations.
  Specified with respect to a frame.
\end{definition}

\begin{definition}[Atomic Expressions]
  Set of symbols \(\mathsf{Exp}\).
\end{definition}

\begin{definition}[Valuation]
  Given a frame \(\oframe{F}\) and a set of atomic expressions \(\mathsf{Exp}\) a valuation \(V\) is a \emph{partial} function from \(\mathsf{Exp} \times S \to \{0, 1\}\).
\end{definition}

\begin{definition}[Model]
  An \emph{oblique model} \(\omodel{M} = \langle \oframe{F}, V \rangle\) is a frame together with an valuation.
\end{definition}

\begin{definition}[Oblique language]
  Given a collection of atomic expressions \(\mathsf{Exp}\), the well-formed expressions \(\phi\) of an \emph{oblique language} \(\olang{}\) are given by the following rule:
  \[
    \phi \Coloneqq \top \bnfsep P \in \mathsf{Exp} \bnfsep \lnot\phi \bnfsep \phi\land\psi \bnfsep \phi \CBox \psi \bnfsep \phi \CWindow \psi
  \]
\end{definition}

As the valuation is partial, a given formula may be neither true nor false.
Hence, it is not possible to define falsity as the absence of truth, nor truth as the absence of falsity.
Therefore, we make use of a partial truth relation between states and formulas \(\vDash\) and a partial falsity relation between states and formulas \((\Dashv)\).


\begin{definition}[Truth and falsity conditions]
  Let \(\omodel{M}\) be an arbitrary oblique model, \(s \in S\), \(p \in \mathsf{Exp}\) and \(\phi,\psi \in \Lambda\).

  The truth and falsity conditions are recursively defined by the following.
  \begin{enumerate}[label=T\arabic*.]
  \item \(M,s \vDash \top\)
  \item \(M,s \vDash p\) iff \(\text{V}(p,w) = 1\)
  \item \(M,s \vDash \lnot\phi\) iff \(M,s \Dashv \phi\)
  \item \(M,s \vDash \phi \land \psi\) iff \(M,s \vDash \phi\) and \(M,s \vDash \psi\)
  \item \(M,s \vDash \phi \CBox \psi\) iff \(\forall t((Rst \land M,t \vDash \phi) \Rightarrow M,t \vDash \psi)\)
  \item \(M,s \vDash \phi \CWindow \psi\) iff \(\forall t((\lnot Rst \land M,t \Dashv \phi) \Rightarrow M,t \Dashv \psi)\)
  \end{enumerate}

  \begin{enumerate}[label=F\arabic*.]
  \item \(M,s \not\Dashv \top\)
  \item \(M,s \Dashv p\) iff \(\text{V}(p,w) = 0\)
  \item \(M,s \Dashv \lnot\phi\) iff \(M,s \vDash \phi\)
  \item \(M,s \Dashv \phi \land \psi\) iff \(M,s \Dashv \phi\) or \(M,s \Dashv \psi\)
  \item \(M,s \Dashv \phi \CBox \psi\) iff \(\exists t(Rst \land M,t \vDash \phi \land M,t \Dashv \psi)\)
  \item \(M,s \Dashv \phi \CWindow \psi\) iff \(\exists t(\lnot Rst \land M,t \Dashv \phi \land M,t \vDash \psi)\)
  \end{enumerate}
\end{definition}

\begin{note}
  The use of conditional modalities is largely to establish completeness.
  In particular, the conditional nature of these modalities allows us to avoid making commitments about the truth or falsity of propositions at accessible or inaccessible states.

  One upshot of the given definition of conditional modalities is that is straightforward to define non-conditional variants.
  \begin{itemize}
  \item \(\Box \phi \coloneq \top \CBox \phi\)
  \item \(\Window \phi \colon \bot \CWindow \phi\)
  \end{itemize}

  With these definitions the following truth and falsity clauses follow by definition (and simplification):
  \begin{itemize}
  \item \(M,s \vDash \Box\phi\) iff \(\forall t((Rst \Rightarrow M,t \vDash \phi)\)
  \item \(M,s \Dashv \Box \phi\) iff \(\exists t(Rst \text{ and } M,t \Dashv \phi)\)
  \item \(M,s \vDash \Window \phi\) iff \(\forall t(\lnot Rst \Rightarrow M,t \Dashv \phi)\)
  \item \(M,s \Dashv \Window \phi\) iff \(\exists t(\lnot Rst \text{ and } M,t \vDash \phi)\)
  \end{itemize}
  And upshot here is that the role of the window modality is now easy to understand.
  For by rewriting the truth clause we have:
  \begin{itemize}
  \item \(M,s \vDash \Window \phi\) iff \(\forall t(M,t \not\Dashv \phi \Rightarrow Rst)\)
  \end{itemize}
  In other words, \(\phi\) can \emph{only} be true at accessible states, though \(\phi\) is not required to be true at accessible states.
  Intuitively, one can `rule out' \(\lnot\phi\) while failing to establish \(\phi\).
  Part of the interest here is the ability to capture the idea that an agent may have a partial state of information where they are able to rule out \(\lnot\phi\) being the case given the information that they have, while either:
  \begin{itemize}
  \item Remaining uncertain that about whether \(\phi\) is the case or \(\lnot\phi\) is the case if \(\Window \phi\) is not required to hold under extended valuations, or
  \item Remaining uncertain about which other states will be ruled out if \(\Window \phi\) is required to hold under extended valuations.
  \end{itemize}
  Where an `extended valuation' simply defines additional propositional atoms given the current valuation.
\end{note}

Conditional diamond modalities are the `dual' of conditional box modalities.

\begin{definition}[Diamonds]
  For \(\phi,\psi \in \Lambda\), define:
  \begin{itemize}
  \item \(\phi \CDiamond \psi \coloneq\lnot(\phi \CBox \lnot\psi)\).
  \item \(\phi \CKite \psi \coloneq \lnot(\phi \CWindow \lnot\psi) \)
  \end{itemize}
\end{definition}

\begin{proposition}[Diamond truth and falsity conditions]
  Let \(\omodel{M}\) be an arbitrary oblique model, \(s \in S\), \(p \in \mathsf{Exp}\) and \(\phi,\psi \in \Lambda\).
  \begin{enumerate}
  \item \(M,s \vDash \phi \CDiamond \psi\) iff \(\exists t(Rst, M,t \vDash \phi \text{ and } M,t \vDash \psi)\)
  \item \(M,s \Dashv \phi \CDiamond \psi\) iff \(\forall t((Rst \text{ and } M,t \vDash \phi) \Rightarrow  M,t \vDash \lnot\psi)\)
  \end{enumerate}

  \begin{enumerate}
  \item \(M,s \vDash \phi \CKite \psi\) iff \(\exists t(\lnot Rst, M,t \Dashv \phi \text{ and } M,t \Dashv \psi)\)
  \item \(M,s \Dashv \phi \CKite \psi\) iff \(\forall t((\lnot Rst, \text{ and } M,t \Dashv \phi) \Rightarrow M,t \Dashv \lnot\psi)\)
  \end{enumerate}
  \begin{proof}
    Straightforward from the truth/falsity conditions of the corresponding box-type modalities.
  \end{proof}
\end{proposition}

And extremely useful property of true \(\CDiamond\) formulas is the ability to rewrite these as `unconditional' diamond formulas, as proposition~\ref{prop:diamondsimplification} notes.

\begin{proposition}[Diamond truth simplification]\label{prop:diamondsimplification}
  Let \(\omodel{M}\) be an arbitrary oblique model, \(s \in S\), \(p \in \mathsf{Exp}\) and \(\phi,\psi \in \Lambda\).
  Then:
  \begin{itemize}
  \item \(M,s \vDash \phi \CDiamond \psi\) iff \(M,s \vDash \top \CDiamond (\phi \land \psi)\).
  \end{itemize}
  \begin{proof}
    The biconditional is established by the following sequence of equivalences.
    \begin{itemize}
    \item \(M,s \vDash \phi \CDiamond \psi\).
    \item \(\exists t(Rst, M,t \vDash \phi \text{ and } M,t \vDash \psi)\).
    \item \(\exists t(Rst, M,t \vDash \top \text{ and } M,t \vDash \phi \land \psi)\).
    \item \(M,s \vDash \top \CDiamond (\phi \land \psi)\).
    \end{itemize}
  \end{proof}
\end{proposition}

We will make significant use of this ability to rewrite true diamond formulas in our axiomatization of the system.
However, we note that this only holds for \emph{true} diamond formulas.

\begin{note}
  It is not the case that
  \begin{itemize}
  \item \(M,s \Dashv \phi \CDiamond \psi\) iff \(M,s \Dashv \top \CDiamond (\phi \land \psi)\).
  \end{itemize}
  In particular, the left-to-right instance of the biconditional fails.

  This is because the former holds iff every \(\phi\) state is a \(\lnot\psi\) state.
  However, the latter holds iff every state is either a \(\lnot\phi\) state or a \(\lnot\psi\) state.
  Hence, the former may hold while \(\phi\) and \(\lnot\psi\) are undefined.
  Hence, if neither \(\phi, \lnot\phi, \psi\) nor \(\lnot\psi\) are defined, the former will hold while the latter does not.
\end{note}

Finally, we note the ability to define a global conditional modality.
Indeed, it is the ability to define such a modality that motivates the use of \emph{conditional} box- and window-modalities, as this global modality is required to ensure the appropriate interaction between the box- and window-modalities in the canonical model.

\begin{definition}[Global modality]
  Take \(\phi,\psi \in \Lambda\).

  We define a global conditional modality \(\CGlobal\) as:
  \[
    \phi \CGlobal \psi \colon ((\phi \CBox \psi) \land (\lnot\phi \CWindow \lnot\psi))
  \]
\end{definition}

\begin{proposition}[Global truth and falsity conditions]\label{prop:gtandf}
  Let \(\omodel{M}\) be an arbitrary oblique model, \(s \in S\), \(p \in \mathsf{Exp}\) and \(\phi,\psi \in \Lambda\).
  \begin{enumerate}
  \item\label{gdef:1} \(M,s \vDash \phi \CGlobal \psi\) iff \(\forall t(\text{ if } M,t \vDash \phi \text{ then } M,t \vDash \psi)\)
  \item\label{gdef:2} \(M,s \Dashv \phi \CGlobal \psi\) iff \(\exists t(M,t \vDash \phi \text{ and } M,t \Dashv \psi)\)
  \end{enumerate}
  \begin{proof}
    The proof primarily amounts to checking definitions.
    \begin{description}
    \item[\ref{gdef:1}]

      \begin{description}
      \item[Left-to-right]

      Suppose \(M,s \vDash \phi \CGlobal \psi\).
      Then \(M,s \vDash \phi \CBox \psi\) and \(M,s \vDash \lnot\phi \CWindow \lnot\psi\).
      Let \(t\) be arbitrary such that \(M,t \vDash \phi\).
      Either \(Rst\) or \(\lnot Rst\).
      If \(Rst\) then as \(M,s \vDash \phi \CBox \psi\) we know \(M,t \vDash \psi\).
      And, if \(\lnot Rst\) then as \(M,t \vDash \phi\) entails that \(M,t \Dashv \lnot\phi\) and \(M,s \vDash \lnot\phi \CWindow \lnot\psi\) we know \(M,t \Dashv \lnot\psi\), and hence \(M,t \vDash \psi\).

    \item[Right-to-left]

      Suppose that \(\forall t(\text{ if } M,t \vDash \phi \text{ then } M,t \vDash \psi)\).
      Then it is straightforward to check that both \(M,s \vDash \phi \CBox \psi\) and \(M,s \vDash \lnot\phi \CWindow \lnot\psi\).

    \end{description}
    \item[\ref{gdef:2}]

      \begin{description}
      \item[Left-to-right]

        Suppose \(M,s \Dashv \phi \CGlobal \psi\).
        Then, \(M,s \Dashv (\phi \CBox \psi \land \lnot\phi \CWindow \lnot\psi)\).
        Hence, either \(M,s \Dashv \phi \CBox \psi\) or \(M,s \Dashv \lnot\phi \CWindow \lnot\psi\).

        Suppose \(M,s \Dashv \phi \CBox \psi\).
        Then, by definition \(\exists t(Rst \land M,t \vDash \phi \text{ and } M,t \Dashv \psi)\).

        Likewise, if \(M,s \Dashv \lnot\phi \CWindow \lnot\psi\) then by definition \(\exists t(\lnot Rst \land M,t \Dashv \lnot\phi \text{ and } M,t \vDash \lnot\psi)\).
        Rewriting, \(M,t \vDash \phi\) and \(M,t \vDash \phi\psi\).

      \item[Right-to-left]

        Suppose \(\exists t(M,t \vDash \phi \text{ and } M,t \Dashv \psi)\).
        Then either \(Rst\) or \(\lnot Rst\).
        If the former is the case it is straightforward to check that \(M,s \Dashv \phi \CBox \psi\).
        And, if the latter is the case it is straightforward to check that \(M,s \Dashv \lnot\phi \CWindow \lnot\psi\).

        So, as either \(M,s \Dashv \phi \CBox \psi\) or \(M,s \Dashv \lnot\phi \CWindow \lnot\psi\), we know that \(M,s \Dashv ((\phi \CBox \psi) \land (\lnot\phi \CWindow \lnot\psi))\)

      \end{description}
    \end{description}
  \end{proof}
\end{proposition}

The existence of a global box-type modality also allows us to define a global diamond-type modality.
Again, this will prove useful when establishing completeness.

\begin{definition}[Global diamond modality]
  Take \(\phi,\psi \in \Lambda\).
  We define a global diamond modality \(\CSome\) as:
  \[
    \phi \CSome \psi \coloneq \lnot(\phi \CGlobal \lnot\psi)
  \]
\end{definition}

\begin{corollary}
  Let \(\omodel{M}\) be an arbitrary oblique model, \(s \in S\), \(p \in \mathsf{Exp}\) and \(\phi,\psi \in \Lambda\).
  \begin{enumerate}
  \item\label{gsomedef:1} \(M,s \vDash \phi \CSome \psi\) iff \(\exists t(M,t \vDash \phi \text{ and } M,t \vDash \psi)\)
  \item\label{gsomedef:2} \(M,s \Dashv \phi \CSome \psi\) iff \(\forall t(\text{ if } M,t \vDash \phi \text{ then } M,t \Dashv \psi)\)
  \end{enumerate}
  \begin{proof}
    Follows from proposition~\ref{prop:gtandf}.
  \end{proof}
\end{corollary}

\newpage






\section{Sequential Rules}
\label{sec:sequential-rules}

The sequential rules follow those given by \textcite[120]{Jaspars:1996aa}, with the exception of the modal rules.
The modal rules are inspired by those given by \citeauthor{Jaspars:1996aa}, but differ due to the use of conditional modalities, the introduction of a window-type modality, and the required interaction between the box- and window-modalities.

\subsection{Structural Rules}
\label{sec:structural-rules}

\deffCenter

four structural rules, more or less standard.

\begin{prooftree}
  \def\fCenter{\mbox{\ \(\cap\)\ }}
  \Axiom\(\Gamma \fCenter\ \Delta \ne \emptyset\)
  \RightLabel{\ruleStart}
  \deffCenter
  \UnaryInf\(\Gamma \fCenter\ \Delta\)
\end{prooftree}

\begin{multicols}{2}
  \begin{prooftree}
    \Axiom\(\Gamma \fCenter\ \Delta\)
    \def\fCenter{\mbox{\ \(\subseteq\)\ }}
    \Axiom\(\Delta \fCenter\ \Delta'\)
    \RightLabel{\ruleMonR}
    \deffCenter
    \BinaryInf\(\Gamma \fCenter\ \Delta'\)
  \end{prooftree}

\begin{prooftree}
  \Axiom\(\Gamma \fCenter\ \Delta\)
  \def\fCenter{\mbox{\ \(\subseteq\)\ }}
  \Axiom\(\Gamma \fCenter\ \Gamma'\)
  \RightLabel{\ruleMonL}
  \deffCenter
  \BinaryInf\(\Gamma' \fCenter\ \Delta\)
\end{prooftree}
\end{multicols}

\begin{prooftree}
  \Axiom\(\Gamma, \phi \fCenter \Delta\)
  \Axiom\(\Gamma \fCenter \phi, \Delta\)\RightLabel{\ruleCut}
  \BinaryInf\(\Gamma \fCenter \Delta\)
\end{prooftree}

\subsection{Propositional rules}
\label{sec:propositional-rules}

\begin{multicols}{2}
  \begin{prooftree}
    \Axiom\(\Gamma \fCenter\ \phi, \Delta\)
    \RightLabel{\ruleLNS}
    \UnaryInf\(\Gamma, \lnot\phi \fCenter\ \Delta\)
  \end{prooftree}

  \begin{prooftree}
    \Axiom\(\Gamma, \phi \fCenter\ \Delta\)
    \RightLabel{\ruleLDN}
    \UnaryInf\(\Gamma, \lnot\lnot\phi \fCenter\ \Delta\)
  \end{prooftree}

  \begin{prooftree}
    \Axiom\(\Gamma,\phi,\psi \fCenter\ \Delta\)
    \RightLabel{\ruleAndL}
    \UnaryInf\(\Gamma,\phi\land\psi \fCenter\ \Delta\)
  \end{prooftree}

  \begin{prooftree}
    \Axiom\(\Gamma, \lnot\phi \fCenter\ \Delta\)
    \Axiom\(\Gamma, \lnot\psi \fCenter\ \Delta\)
    \RightLabel{\ruleNAndL}
    \BinaryInf\(\Gamma, \lnot(\phi \land \psi) \fCenter\ \Delta\)
  \end{prooftree}

  \begin{prooftree}
    \AxiomEmpty
    \RightLabel{\ruleTop}
    \UnaryInf\(\Gamma \fCenter \top, \Delta\)
  \end{prooftree}

  \begin{prooftree}
    \Axiom\(\Gamma \fCenter\ \phi, \Delta\)
    \RightLabel{\ruleRDN}
    \UnaryInf\(\Gamma \fCenter\ \lnot\lnot\phi, \Delta\)
  \end{prooftree}

  \begin{prooftree}
    \Axiom\(\Gamma \fCenter\ \phi, \Delta\)
    \Axiom\(\Gamma \fCenter\ \psi, \Delta\)
    \RightLabel{\ruleAndR}
    \BinaryInf\(\Gamma \fCenter\ \phi\land\psi, \Delta\)
  \end{prooftree}

  \begin{prooftree}
    \Axiom\(\Gamma \fCenter\ \lnot\phi, \lnot\psi, \Delta\)
    \RightLabel{\ruleNAndR}
    \UnaryInf\(\Gamma \fCenter\ \lnot(\phi \land \psi)\Delta\)
  \end{prooftree}
\end{multicols}

\subsection{Modal Rules}
\label{sec:modal-rules}

Following \citeauthor{Jaspars:1996aa}, we introduce a single rule covering the general semantics of unconditional \(\Box\)-type formulas in our system.
This rule is termed general as it does not depend on the constraints we place on accessibility relations.

\subsection{Conditional box rules}
\label{sec:cond-box-rules}

A pair of rules capture the main interest of the box modality.
For convenience we make use of the defined diamond operator.

We also make use of the shorthand \(\phi \CBox \Gamma\) to abbreviate \(\{\phi \CBox \gamma \mid \gamma \in \Gamma\}\), etc.

\begin{prooftree}
  \Axiom\(\Gamma \fCenter\ \phi, \Delta\)
  \RightLabel{\ruleCBoxR}
  \UnaryInf\(\psi \CBox \Gamma, \fCenter\ \psi \CBox \phi, \psi \CDiamond \Delta\)
\end{prooftree}

\begin{prooftree}
  \Axiom\(\Gamma, \phi \fCenter\ \Delta\)
  \RightLabel{\ruleCDiamondR}
  \UnaryInf\(\phi \CBox \Gamma, \top \CDiamond \phi \fCenter\ \top \CDiamond \Delta\)
\end{prooftree}

Both of these rules are inspired by the rules given for the box modality by \textcite[120]{Jaspars:1996aa}.
Why these rules are sound can be seen from the proofs below.
The quick summary is that:

Rule \ruleCBoxR\ assumes that whenever \(\Gamma\) is true, either \(\phi\) is true or some \(\delta \in \Delta\) is true.
Therefore, if the truth of \(\psi\) guarantees the truth of all \(\gamma \in \Gamma\), then for all accessible states, if \(\psi\) is true at an accessible state then either \(\phi\) or some \(\delta \in \Delta\) is true.
If there is no accessible state, then \(\psi \CBox \phi\) is trivially true, and likewise \(\psi \CBox \phi\) is true if \(\phi\) is true at every accessible state.
Therefore, if \(\psi \CBox \phi\) is \emph{not} true, we can be sure that there is some accessible state where some \(\delta \in \Delta\) is true.

Rule \ruleCDiamondR\ is more straightforward.
For, if the truth of \(\Gamma\) and \(\phi\) guarantees the truth of some \(\delta \in \Delta\), then if there is an accessible state in which \(\phi\) is true, and we requires each \(\gamma \in \Gamma\) to be true at any state at which \(\phi\) is true, then some \(\delta \in \Delta\) must be true at that state.

\begin{lemma}[Soundness]
  Rules \ruleCBoxR\ and \ruleCDiamondR are sound.
  \begin{proof}
    \begin{description}
  \item[\ruleCBoxR]\mbox{ }
    Suppose \(\Gamma \Vdash \phi, \lnot\Delta\).

    Take some \(s \in \omodel{M}\) such that \(\omodel{M},s \vDash \psi \CBox \gamma\) for all \(\gamma \in \Gamma\).

    If there are no \(t\) such that \(Rst\) then it is trivially the case that \(\omodel{M}, s \vDash \psi \CBox \gamma\).
    So, consider \(T = \{ t \mid Rst \}\).
    If there is no \(t \in T\) such that \(\omodel{M}, t \vDash \psi\), then as before it is trivially the case that \(\omodel{M}, s \vDash \psi \CBox \psi\).
    Hence, consider \(T' = \{ t \mid Rst \text{ and } \omodel{M}, t \vDash \psi \}\).
    For an arbitrary \(t' \in T'\) we know that \(M,t' \vDash \gamma\) for all \(\gamma \in \Gamma\), and therefore by our initial assumption we know that either \(M, t' \vDash \phi\), or \(M,t' \vDash \delta\) for some \(\delta \in \Delta\).

    One the one hand, if it is the case that \(\omodel{M},t' \vDash \phi\) for all \(t' \in T\), then it is (non-vacuously) the case that \(\omodel{M}, s \vDash \psi \CBox \gamma\).
    On the other hand, if it is the case that \(\omodel{M},t' \nvDash \phi\) for some \(t' \in T\), then it must be the case that \(\omodel{M},t' \vDash \delta\) for some \(\delta \in \Delta\), and hence \(\omodel{M},s \vDash \psi \CDiamond \delta\).

  \item[\ruleCDiamondR]\mbox{ }

    Suppose \(\Gamma, \phi \Vdash \Delta\).
    And, take some \(s \in \omodel{M}\) such that \(\omodel{M},s \vDash \psi \CBox \gamma\) for all \(\gamma \in \Gamma\), and such that \(\omodel{M},s \vDash \top \CDiamond \phi\).

    As \(\omodel{M},s \vDash \top \CDiamond \phi\), we know that there is some \(t \in \omodel{M}\) such that \(Rst\) and \(\omodel{M}, t \vDash \phi\).
    And, given that \(Rst\) and \(\omodel{M},s \vDash \psi \CBox \gamma\) for all \(\gamma \in \Gamma\), we know that \(\omodel{M},t \vDash \gamma\) for all \(\gamma \in \Gamma\).
    Therefore, by our initial assumption we know that \(\omodel{M},t \vDash \delta\) for some \(\delta \in \Delta\), hence \(\omodel{M},s \vDash \top \CDiamond \delta\) for some \(\delta \in \Delta\).
      \end{description}
  \end{proof}
\end{lemma}

\subsection{Conditional window rules}
\label{sec:cond-wind-rules}

The semantics of the window modality are structurally the same as the box modality, with the only difference being that the window modality focuses on inaccessible states and falsity, rather than accessible states and true.
Therefore, the sequents governing the window modality simply exchange truth for falsity.\nolinebreak
\footnote{
  Note, \(\bot\) is defined as \(\lnot\top\).
}

\begin{prooftree}
  \Axiom\(\lnot\Gamma \fCenter\ \lnot\phi, \lnot\Delta\)
  \RightLabel{\ruleCWindowL}
  \UnaryInf\(\psi \CWindow \Gamma, \fCenter\ \psi \CWindow \phi, \psi \CKite \Delta\)
\end{prooftree}

\begin{prooftree}
  \Axiom\(\lnot\Gamma, \lnot\phi \fCenter\ \lnot\Delta\)
  \RightLabel{\ruleCKiteR}
  \UnaryInf\(\phi \CWindow \Gamma, \bot \CKite \phi \fCenter\ \bot \CKite \Delta\)
\end{prooftree}


\begin{lemma}[Soundness]
  Rules \ruleCWindowL\ and \ruleCKiteR\ are sound.
  \begin{proof}
    Analogous to the proof(s) that rules \ruleDSwitch\ and \ruleDiamondW\ are sound.
  \end{proof}
\end{lemma}


\subsection{A handful of rules to help with completeness}
\label{sec:handful-rules-help}

In the completeness proof we appeal to an additional pair of rules regarding diamond formulas.
I suspect both can be derived from the primary pair of rules, but it is straightforward to see that they are sound in any case.

\begin{prooftree}
  \Axiom\(\Gamma \fCenter\ \top \CDiamond (\phi \land \psi)\)
  \RightLabel{\ruleDSwitch}
  \UnaryInf\(\Gamma \fCenter\ \phi \CDiamond \psi\)
\end{prooftree}

\begin{prooftree}
  \Axiom\(\Gamma \fCenter\ \top \CDiamond (\phi \land \psi)\)
  \RightLabel{\ruleDiamondW}
  \UnaryInf\(\Gamma \fCenter\ \top \CDiamond \phi\)
\end{prooftree}

\begin{proposition}
  Rules \ruleDSwitch\ and \ruleDiamondW\ are sound.
  \begin{proof}\mbox{ }
    \begin{description}
    \item[\ruleDSwitch]\mbox{ }

      Assume \(\Gamma \Vdash \top \CDiamond (\phi \land \lnot\psi)\).
      Take some \(s \in \omodel{M}\) and assume \(\omodel{M},s \vDash \gamma\) for all \(\gamma \in \Gamma\).
      Therefore, \(\omodel{M},s \vDash \top \CDiamond (\phi \land \psi)\).
      Hence, by proposition~\ref{prop:diamondsimplification} we know \(\omodel{M},s \vDash \phi \CDiamond \psi\).

    \item[\ruleDiamondW]\mbox{ }

      Assume \(\Gamma \Vdash \top \CDiamond (\phi \land \psi)\).
      Take some \(s \in \omodel{M}\) and assume \(\omodel{M},s \vDash \gamma\) for all \(\gamma \in \Gamma\).
      Hence, \(\omodel{M},s \vDash \top \CDiamond (\phi \land \phi)\), so there is some \(t \in \omodel{M}\) such that \(Rst\) and \(\omodel{M},t \vDash \phi \land \psi\).
      Straightforwardly, \(\omodel{M},t \vDash \phi\), and therefore \(\omodel{M},s \vDash \top \CDiamond \phi\).
    \end{description}
  \end{proof}
\end{proposition}

We also make use of a rule capturing some of the interaction between the box and diamond modalities.
Again, this may be derivable from the primary pair of rules governing the box and diamond modalities.

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{\ruleCWindowPlus}
  \UnaryInf\(\phi \CBox \psi, \top \CDiamond (\phi \land \chi)  \fCenter\ \top \CDiamond (\psi \land \chi)\)
\end{prooftree}

\begin{lemma}[Soundness]
  Rule \ruleCWindowPlus\ is sound.
  \begin{proof}
    Take an arbitrary state \(s \in \omodel{M}\) such that \(M,s \vDash \phi \CBox \psi\) and \(M,s \vDash \top \CDiamond (\phi \land \chi)\).
    By the latter, we are guaranteed some state \(t \in \omodel{M}\) such that \(Rst\) with \(M,t \vDash \phi \land \psi\).
    By the former, we know that for any \(t'\) such that \(Rst'\) with \(M,t' \vDash \phi\), it is also the case that \(M,t' \vDash \psi\).
    Hence, we know that \(M,t \vDash \psi \land \chi\).
    Therefore, as \(Rst\), we know \(M,s \vDash \top \CDiamond (\psi \land \chi)\).
  \end{proof}
\end{lemma}

As \ruleCWindowPlus\ captures some of the interaction between box and diamond, an analogous rule holds for the interaction between window and kite.

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{\ruleCKitePlus}
  \UnaryInf\(\lnot\phi \CWindow \lnot\psi, \bot \CKite \lnot(\phi \land \chi)  \fCenter\ \bot \CKite \lnot(\psi \land \chi)\)
\end{prooftree}

And, as with the box modalities we have a pair of supplemental rules for the kite modality to help with the completeness proof.

\begin{prooftree}
  \Axiom\(\Gamma \fCenter\ \top \CKite \lnot(\phi \land \psi)\)
  \RightLabel{\ruleDSwitch}
  \UnaryInf\(\Gamma \fCenter\ \lnot\phi \CKite \lnot\psi\)
\end{prooftree}

\begin{prooftree}
  \Axiom\(\fCenter\ \bot \CKite \lnot(\phi \land \psi)\)
  \RightLabel{\ruleKiteW}
  \UnaryInf\(\fCenter\ \bot \CKite \lnot\phi\)
\end{prooftree}

Finally, a pair of tautologies:

\begin{multicols}{2}
  \begin{prooftree}
    \AxiomEmpty
    \RightLabel{\ruleCBoxTaut}
    \UnaryInf\(\fCenter\ \phi \CBox \phi\)
  \end{prooftree}

  \begin{prooftree}
    \AxiomEmpty
    \RightLabel{\ruleCWindowTaut}
    \UnaryInf\(\fCenter\ \phi \CWindow \phi\)
  \end{prooftree}
\end{multicols}

\begin{proposition}
  Rules \ruleCBoxTaut\ and \ruleCWindowTaut\ are sound.
  \begin{proof}
    Immediate by the semantic clauses for the modalities.
  \end{proof}
\end{proposition}

Rules \ruleCBoxTaut\ and \ruleCWindowTaut\ are independently useful, and also allow us to derive a pair of useful derived rules.

\begin{proposition}
  The following pair of rules, \ruleCBoxConq\ and \ruleCBoxConq, can be derived.

\begin{multicols}{2}
  \begin{prooftree}
    \Axiom\(\phi \fCenter\ \psi\)
    \RightLabel{\ruleCBoxConq}
    \UnaryInf\(\fCenter\ \phi \CBox \psi\)
  \end{prooftree}

    \begin{prooftree}
    \Axiom\(\lnot\phi \fCenter\ \lnot\psi\)
    \RightLabel{\ruleCBoxConq}
    \UnaryInf\(\fCenter\ \phi \CWindow \psi\)
  \end{prooftree}
\end{multicols}

\begin{proof}
  The derivation for both rules is analogous.
  We provide the derivation for \ruleCBoxConq.
    \begin{prooftree}
    \Axiom\(\phi \fCenter\ \psi\)
    \RightLabel{\ruleCBoxR}
    \UnaryInf\(\phi \CBox \phi \fCenter\ \phi \CBox \psi\)
    \AxiomEmpty
    \RightLabel{\ruleCBoxTaut}
    \UnaryInf\(\fCenter\ \phi \CBox \phi\)
    \RightLabel{\ruleCut}
    \BinaryInf\(\fCenter\ \phi \CBox \psi\)
  \end{prooftree}
\end{proof}
\end{proposition}

\subsection{Interaction sequents}
\label{sec:inter-modal}

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{\ruleCBoxWindowGlobal}
  \UnaryInf\(\phi \CBox \psi, \gamma \CWindow \delta \fCenter\ (\phi \land \lnot\gamma) \CGlobal (\psi \lor \lnot\delta)\)
\end{prooftree}

\begin{proposition}
  Rule \ruleCBoxWindowGlobal\ is sound.
  \begin{proof}
    Suppose \(M,s \vDash \phi \CBox \psi\) and \(M,s \vDash \gamma \CWindow \delta\).
    Let \(t\) be arbitrary such that \(M,t \vDash \phi \land \gamma\).
    Either \(Rst\) or \(\lnot Rst\).

    If \(Rst\) then as \(M,s \vDash \phi \CBox \psi\) \(M,t \vDash \phi\) we know \(M,t \vDash \psi\), whence \(M,t \vDash \psi \lor \lnot\delta\).
    Likewise, if \(\lnot Rst\), then as \(M,s \vDash \gamma \CWindow \delta\) and \(M,t \vDash \lnot\gamma\), we know \(M,t \vDash \lnot\delta\), whence \(M,t \vDash \psi \lor \lnot\delta\).

    So, we have shown that for any \(t \in \omodel{M}\), if \(M,t \vDash \phi \land \gamma\) then \(M,t \vDash \psi \lor \lnot\delta\), and therefore \(M,s \vDash (\phi \land \lnot\gamma) \CGlobal (\psi \lor \lnot\delta)\).
  \end{proof}
\end{proposition}

\begin{prooftree}
  \Axiom\(\Gamma \fCenter\ \chi \CDiamond ((\phi' \land \lnot\phi) \CGlobal (\psi' \lor \lnot\psi))\)
  \RightLabel{\ruleGDG}
  \UnaryInf\(\Gamma \fCenter\ (\phi' \land \lnot\phi) \CGlobal (\psi' \lor \lnot\psi)\)
\end{prooftree}

\begin{proposition}
Rule \ruleGDG\ is sound.
\begin{proof}
  Suppose \(\Gamma \Vdash \chi \CDiamond ((\phi' \land \lnot\phi) \CGlobal (\psi' \lor \lnot\psi))\).
  Take some \(s \in \omodel{M}\) and assume \(M,s \vDash \gamma\) for each \(\gamma \in \Gamma\).
  Hence, \(M,s \vDash \chi \CDiamond ((\phi' \land \lnot\phi) \CGlobal (\psi' \lor \lnot\psi))\), and so there is some \(t \in \omodel{M}\) such that \(Rst\) with \(M,t \vDash \chi\) and \(M,t \vDash (\phi' \land \lnot\phi) \CGlobal (\psi' \lor \lnot\psi)\).
  Hence, we know that for all \(v \in \omodel{M}\), if \(M,v \vDash \phi' \land \lnot\phi\) then \(M,v \vDash \psi' \lor \lnot\psi\).
  So, we know that \(M,s \vDash (\phi' \land \lnot\phi) \CGlobal (\psi' \lor \lnot\psi)\).
\end{proof}
\end{proposition}

\subsection{Global sequents}
\label{sec:global-sequents}

Make use of a global conditional modality.
The global conditional is defined.
To keep things simple, rules are stated with the global conditional modality.

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{\ruleDGE}
  \UnaryInf\(\top \CDiamond (\phi \CGlobal \psi)  \fCenter\ \phi \CGlobal \psi\)
\end{prooftree}

\begin{proof}
  If accessible world, then as it's global, must hold at current state also.
\end{proof}


\begin{prooftree}
  \Axiom\(\Gamma \fCenter\ \phi\)
  \Axiom\(\Gamma \fCenter\ \phi \CGlobal \psi\)
  \RightLabel{\ruleGE}
  \BinaryInf\(\Gamma \fCenter\ \psi\)
\end{prooftree}


\begin{prooftree}
  \AxiomEmpty
  \RightLabel{\ruleP}
  \UnaryInf\(\phi \CBox \xi \fCenter\ \top \CKite \lnot\psi, (\phi \land \psi) \CGlobal \xi\)
\end{prooftree}

\begin{proof}
  Suppose \(\phi \CBox \xi\).
  Then, every accessible state at which \(\phi\) is true, \(\xi\) is also true.
  Then, either there is some inaccessible state at which \(\psi\) is true, or \(\psi\) is only true at accessible states (or no state at all), which would mean that for any state, if both \(\phi \land \psi\) are true, the state it accessible, from which the truth of \(\phi\) guarantees the truth of \(\xi\).
\end{proof}

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{\rulePP}
  \UnaryInf\(\phi \CWindow \psi \fCenter\ \top \CDiamond \chi, (\lnot\phi \land \chi) \CGlobal \lnot\psi\)
\end{prooftree}

\begin{proof}
  If there's an inaccessible state where \(\lnot\phi\) is true, then \(\lnot\psi\) is also true at that state.
  Hence, either there is an accessible state where \(\chi\) is true, or there is not.
  If there is not, then \(\chi\) can only be true at inaccessible states, but then the conjunction of \(\lnot\phi\) and \(\chi\) is only true at inaccessible states, and so as \(\lnot\phi\) guarantees \(\lnot\psi\) at inaccessible states, and \(\chi\) restricts to inaccessible states, we know that \((\lnot\phi \land \chi) \CGlobal \lnot\psi\)
\end{proof}

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{\ruleGDiamond}
  \UnaryInf\(\phi \fCenter\ \top \CBox ((\top \CDiamond \phi) \lor (\bot \CKite \lnot\phi))\)
\end{prooftree}

\begin{proof}
  If \(\phi\) is true, then wherever you go, either it's accessible or inaccessible.
\end{proof}

\hozlinedash

At present the collection of sequents is (likely) incomplete.
The sequents listed above guarantee that when constructing the canonical model, if \(Rst\) then either \(Rts\) or \(\lnot Rts\) (the importance of this is explained below) as \(R\) and \(\lnot R\) are treated as distinct relations in the canonical model.
Additional axioms may be required to ensure additional constraints between \(R\) and \(\lnot R\).

From past notes I can include:

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{O}
  \UnaryInf\(\lnot\phi \CWindow \lnot\xi \fCenter\ \top \CDiamond \psi, (\phi \land \psi) \CGlobal \xi\)
\end{prooftree}

\begin{proof}
  Suppose \(\omodel{},s \vDash \lnot\phi \CWindow \lnot\xi\).

  First, consider the case where \(\omodel{},s \nvDash \Diamond\psi\).
  To see that \((\phi \land \psi) \CGlobal \xi\) suppose there is some state \(t\) such that \(\omodel{},t \vDash \phi \land \psi\).
  As we know \(\omodel{},s \nvDash \Diamond\psi\) it must be the case that \(\lnot Rst\), and hence by the initial assumption we know that \(\omodel{},t \vDash \xi\).

  Second, consider the case where \(\omodel{}, s \nvDash (\phi \land \psi) \CGlobal \xi\).
  Then there is some state \(t\) such that \(\omodel{},t \vDash \phi \land \psi\) but \(\omodel{},t \nvDash \xi\).
  As \(\omodel{},s \vDash \lnot\phi \CWindow \lnot\xi\) it cannot be the case that \(\lnot Rst\), for otherwise it would be the case that \(\omodel{},t \vDash \xi\), and so \(Rst\).
  And, as \(\omodel{},t \vDash \psi\) it is immediate that \(\omodel{},s, \vDash \Diamond\psi\).
\end{proof}

And the following trio of axioms are easily seen to be sound.

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{4ish}
  \UnaryInf\(\phi \CGlobal \psi \fCenter\ \chi \CGlobal (\phi \CGlobal \psi)\)
\end{prooftree}

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{5ish}
  \UnaryInf\(\top \CSome \psi \fCenter\ \chi \CGlobal (\top \CSome \psi)\)
\end{prooftree}

\begin{prooftree}
  \AxiomEmpty
  \RightLabel{Ref-1}
  \UnaryInf\(\phi \CWindow \psi, \lnot\phi, \chi \fCenter\ \lnot\psi, \Diamond\chi\)
\end{prooftree}

\newpage

\subsection{Some useful properties}
\label{sec:some-usef-deriv}

\begin{proposition}[Finiteness]\label{prop:finiteness}
  \(\Gamma \vdash \Delta\) if and only if there exist finite \(\Gamma' \subseteq \Gamma\) and \(\Delta' \subseteq \Delta\) such that \(\Gamma' \vdash \Delta'\).
  \begin{proof}
    The left-to-right direction is by induction on the length of proofs.
    Base cases show how to find the finite sets, and then the rules only manipulate finite subsets.

    The right-to-left direction follows by monotonicity.
  \end{proof}
\end{proposition}

Terming finiteness `useful' may be an understatement, for without this property our method of proving completeness would fail.
However, we introduce the property here as it allows us to derive a pair of useful rules in proposition~\ref{prop:ContapositionRules} which we build up to.


\newpage

\section{Completeness}
\label{sec:completeness-ideas}

Completeness follows the traditional path of showing how to construct a countermodel for any failure of derivability.
% The structural rule \ruleCut\ is important here.
% For, if \(\Gamma \nvdash \Delta\), then \ruleCut\ guarantees there is no \(\lambda\) such that \(\Gamma,\lambda \vdash \Delta\) and \(\Gamma \vdash \lambda,\Delta\).
% Spelt out, this means that there's no expression \(\lambda\) which connects \(\Gamma\) and \(\Delta\) by requiring that when every expression in \(\Gamma\) is true then some expression in \(\Delta\) must also be true and if every expression in \(\Delta\) is false then some expression in \(\Gamma\) is false.
% Hence, it will be possible to expand \(\Gamma\) and \(\Delta\) to an exhaustive pair \(\Gamma'\) and \(\Delta'\) partitioning the language, which in turn will provide the basis for specifying a countermodel.

\begin{definition}[Consistency]
  \begin{itemize}
  \item \(\Gamma\) is consistent iff \(\Gamma \nvdash \emptyset\).
  \end{itemize}
\end{definition}

Consistent sets will be saturated, and correspond to states.

\textcite{Thomason:1968aa} and \textcite{Aczel:1968aa} provide the foundations for saturated theories.

\begin{definition}[Saturation]
  Given a set of formulas \(\Gamma\), we say that \(\Gamma\) is:
  \begin{itemize}
  \item saturated if for all \(\Sigma\), if \(\Gamma \vdash \Sigma\) then \(\Gamma \cap \Sigma \ne \emptyset\).
  \end{itemize}
\end{definition}

\begin{definition}[Saturators]
  \mbox{ }
  \begin{itemize}
  \item \(\Lambda\) is a saturator of \(\Gamma\) iff for all \(\Sigma\) if \(\Gamma \vdash \Sigma\) then \(\Sigma \cap \Lambda \ne \emptyset\)
  \end{itemize}
\end{definition}


The Lindenbaum lemma is more involved than usual.

\begin{lemma}[Lindenbaum]\label{lindenbaum:left}
  Suppose \(\Lambda\) is a  saturator of \(\Gamma\), then there's a saturated set \(\Gamma^{+}\) such that \(\Gamma \subseteq \Gamma^{+} \subseteq \Lambda\).
  \begin{proof}
    Let \(\{\phi\}_{i_{i \in \omega}}\) be an enumeration of \(\olang{}\) such that every element of \(\Lambda\) occurs infinitely many times.\nolinebreak

    Given \(\{\phi\}_{i \in \omega}\), we define a sequence \(\{\Gamma_{i}\}_{i \in \omega}\) such that \(\Lambda\) is a saturator of each \(\Gamma_{i}\), with the limit of the sequence providing the desired saturated pair \(\Gamma^{+}\).

    \begin{align*}
      \Gamma_{0} &= \Gamma \\
      \Gamma_{n+1} &=
                     \begin{cases}
                       \Gamma_{n} \cup \{\phi_{n}\} &\text{if for all finite } \Sigma \colon \Sigma \cap \Lambda \ne \emptyset, \text{ when } \Gamma_{n},\phi_{n} \vdash \Sigma \\
                       \Gamma_{n}
                       &\text{otherwise} \\
                     \end{cases}
      \\
      \Gamma^{+} &= \bigcup_{n \in \omega}\Gamma_{n}
    \end{align*}

    To see that \(\Gamma^{+} \subseteq \Lambda\) note that by definition:
    \begin{enumerate}[label=(\arabic*)]
    \item\label{leftLindenbaum:1} if \(\Gamma_{n} \vdash \Sigma\) then \(\Sigma \cap \Lambda \ne \emptyset\) for all finite \(\Sigma \subseteq \olang{}\).
    \end{enumerate}
    By proposition~\ref{prop:finiteness} this means that \(\Lambda\) is a saturator of each \(\Gamma_{n}\), and so by some other observation we have \(\Gamma^{+} \subseteq \Lambda\).

    To establish the saturation of \(\Gamma^{+}\) we show that:
    \begin{enumerate}[label=(\arabic*),resume]
    \item\label{leftLindenbaum:2} For all \(k \in \omega \colon\) if \(\Gamma_{k} \vdash \Sigma\) and \(\Sigma\) is finite, then \(\Sigma \cap \Gamma^{+} \ne \emptyset\).
    \end{enumerate}

    This is where the repeated instances of a proposition in the enumeration \(\{\phi_{i}\}_{i \in \omega}\) comes into play.
    For, suppose that for some \(k\) and finite \(\Sigma\) it is the case that \(\Gamma_{k} \vdash \Sigma\) but \(\Sigma \cap \Gamma^{+} = \emptyset\).
    By~\ref{leftLindenbaum:1} we know that \(\Sigma \cap \Lambda\) is non-empty, and as each formula occurs in \(\{\phi_{i}\}_{i \in \omega}\) infinitely many times let \(\{\phi_{k_{1}}, \dots, \phi_{k_{n}}\}\) be an enumeration of \(\Sigma \cap \Lambda\) such that \(k < k_{i}\) for all \(i\) and \(k_{i} < k_{j}\) for \(i < j\).
    Intuitively, the enumeration \(\{\phi_{k_{1}}, \dots, \phi_{k_{n}}\}\) identifies some instance of each \(\phi \in \Sigma \cap \Lambda\) which are yet to be considered at the \(k^{\text{th}}\) stage of the sequence.

    For each \(\phi_{k_{i}}\) it must be that \mbox{\(\Gamma, \phi_{k_{i}} \vdash \Sigma_{i}\)} for some finite \(\Sigma_{i}\) such that \(\Sigma_{i} \cap \Lambda = \emptyset\), by the construction of \(\Gamma^{+}\).

    Still, \mbox{\(\Gamma_{k} \vdash \Sigma\)}, and so in particular \mbox{\(\Gamma_{k} \vdash \phi_{k_{i}},\Sigma - \{\phi_{k_{i}}\}\)} for each \(\phi_{k_{i}}\).
    Consider \mbox{\(\Gamma_{k} \vdash \phi_{k_{1}},\Sigma - \{\phi_{k_{1}}\}\)} and note that \mbox{\(\Gamma_{k_{1}}, \phi_{k_{1}} \vdash \Sigma_{1}\)}.
    From the latter two observations and an instance of Cut we obtain \mbox{\(\Gamma_{k}, \Gamma_{k_{1}} \vdash \Sigma - \{\phi_{k_{1}}\}, \Sigma_{1}\)}.
    And, as \mbox{\(\Gamma_{k} \subseteq \Gamma_{k_{1}}\)}, we can infer that \mbox{\(\Gamma_{k_{1}} \vdash \Sigma - \{\phi_{k_{1}}\}, \Sigma_{1}\)}.

    The previous steps can be replicated for each \(\phi_{k_{i}}\), noting that \(\Gamma_{k_{i}} \subseteq \phi_{k_{i+1}}\), from which we obtain \mbox{\(\Gamma_{k_{n}} \vdash \Sigma - \{\phi_{k_{1}},\dots,\phi_{k_{n}}\}, \Sigma_{1},\dots,\Sigma_{n}\)}.
    As \(\Sigma\) is finite by assumption, and each \(\Sigma_{i}\) is also finite (of which there are a finitely many), this means the union of the sets of the right hand side of the consequence relation is finite.
    Yet, \((\Sigma - \{\phi_{k_{1}},\dots,\phi_{k_{n}}\} \cup \Sigma_{1} \cup \dots \cup \Sigma_{n}) \cap \Lambda = \emptyset\), contradicting~\ref{leftLindenbaum:1}, above.

    So, for any finite \(\Gamma_{k}\), if \(\Gamma_{k} \vdash \Sigma\) and \(\Sigma\) is finite, then \(\Sigma \cap \Gamma^{+} \ne \emptyset\).

    By proposition~\ref{prop:finiteness}, if \(\Gamma^{+} \vdash \Sigma\) then there are finite subsets \(\Gamma \subseteq \Gamma^{+}\) and \(\Sigma' \subseteq \Sigma\) such that \(\Gamma \vdash \Sigma\) and by construction of \(\Gamma^{+}\) there is some \(n \in \omega\) such that \(\Gamma_{n} \vdash \Sigma'\).
    From \label{leftLindenbaum:2} we know that \(\Sigma' \cap \Gamma^{+} \ne \emptyset\) and so \(\Sigma \cap \Gamma^{+} \ne \emptyset\).
    Therefore, \(\Gamma^{+}\) is saturated.
  \end{proof}

\end{lemma}

\begin{corollary}[Saturation]\label{col:saturation}
  If \(\Gamma \nvdash \Delta\) then there exists a saturated set \(\Gamma^{+}\) such that \(\Gamma^{+} \cap \Delta = \emptyset\) with \(\Gamma \subseteq \Gamma^{+}\) where \(\Gamma^{+}\) is saturated.
  \begin{proof}
        Suppose \(\Gamma \nvdash \Delta\).
    Then, \(\Delta^{c} = \olang{} - \Delta\) is a saturator of \(\Gamma\).
    For, \(\Delta^{c}\) is \emph{not} a saturator of \(\Gamma\) if and only if there is some \(\Sigma\) such that \(\Gamma \vdash \Sigma\) with \(\Sigma \cap \Delta^{c} = \emptyset\).
    Yet, if \(\Sigma \cap \Delta^{c} = \emptyset\), then \(\Sigma \subseteq \Delta\), and so by \ruleMonR\ the previous is the case if and only if \(\Gamma \vdash \Delta\) contradicting our initial assumption.

    So, as \(\Delta^{c}\) is a saturator of \(\Gamma\) and appeal to lemma~\ref{lindenbaum:left} ensures there is a saturated set \(\Gamma^{+}\) such that \(\Gamma \subseteq \Gamma^{+} \subseteq \Delta^{c}\) and hence \(\Gamma^{+} \cap \Delta = \emptyset\).
  \end{proof}
\end{corollary}

\begin{proposition}
  If \(\Gamma\) is saturated then for all \(\phi,\psi \in \olang{}\):
  \begin{enumerate}
  \item If \(\Gamma \vdash \phi\) then \(\phi \in \Gamma\).
  \item If \(\Gamma \vdash \phi \lor \psi\) then \(\Gamma \vdash \phi\) or \(\Gamma \vdash \psi\).
  \end{enumerate}
  \begin{proof}
    Both are immediate by the definition of saturation.
    For if \(\Gamma \vdash \phi\) and \(\Gamma\) is saturated, then \(\Gamma \cap \{\phi\} \ne \emptyset\), hence \(\phi \in \Gamma\).
    Likewise, if \(\Gamma \vdash \phi \lor \psi\) then \(\Gamma \vdash \phi, \psi\) and hence \(\Gamma \cap \{\phi,\psi\} \ne \emptyset\) and so \(\phi \in \Gamma\) or \(\psi \in \Gamma\) and hence by rules \ruleStart, \ruleMonL, and \ruleMonR, either \(\Gamma \vdash \phi\) or \(\Gamma \vdash \psi\).
  \end{proof}
\end{proposition}

\subsection{The Caonical Model}
\label{sec:caonical-model}

\subsubsection{Overview}
\label{sec:overview}

The required interaction between Box- and Window-type modalities makes the direct construction of an \emph{oblique} canonical model difficult.
However, by adapting a technique developed by Dimiter Vakarelov and put to use by \citeauthor{Gargov:1987aa}, we can straightforwardly construct a non-oblique canonical model which is modally equivalent to an oblique model.

The definition of a generalised model mirrors the definition given by \textcite[255]{Gargov:1987aa}.

\begin{definition}[Generalised model]
  A generalised model is a quadruple \(S, R^{+}, R^{-}, V\) where:
  \begin{itemize}
  \item \(R^{+} \cup R^{-} = S^{2}\)
  \item \(M,s \vDash \phi \CBox \psi\) iff \(\forall t((R^{+}st \land M,t \vDash \phi) \Rightarrow M,t \vDash \psi)\)
  \item \(M,s \vDash \phi \CWindow \psi\) iff \(\forall t((R^{-}st \land M,t \Dashv \phi) \Rightarrow M,t \Dashv \psi)\)
  \item \(M,s \Dashv \phi \CBox \psi\) iff \(\exists t(R^{+}st \land M,t \vDash \phi \land M,t \Dashv \psi)\)
  \item \(M,s \Dashv \phi \CWindow \psi\) iff \(\exists t(R^{-}st \land M,t \Dashv \phi \land M,t \vDash \psi)\)
  \end{itemize}
\end{definition}

In short, \(\CBox\) and \(\CWindow\) are defined with respect to distinct accessibility relations, and we do not require that \(R^{+} \cap R^{-} = \emptyset\).
\citeauthor{Gargov:1987aa}'s `Important Lemma' (\citeyear[256]{Gargov:1987aa}) then details how to find a standard oblique model which is modally equivalent to a generalised model.

Our goal for completeness is to assume that \(\Gamma \nvdash \Delta\) and construct a generalised countermodel to show that \(\Gamma \nvDash \Delta\).

This is a two step process.
First, we construct a countermodel using saturated sets.
As we are showing that \(\Gamma \nvDash \Delta\), we will have a model \(S, R^{+},R^{-}, V\) with a saturated set \(s\) such that \(s \vDash \Gamma\) but \(s \nvDash \Delta\).
However, in general it will not be the case that \(R^{+}st\) or \(R^{-}st\) for any arbitrary saturated set \(t\).
Therefore, we take a point generated canonical model from \(s\).

\begin{definition}[Point generated canonical model]
  Let \(S, R^{+}, R^{-}, V\) be a canonical model, and let \(R^{\circ} = R^{+} \cup R^{-}\).
  For \(s \in S\), the point generated canonical model from \(s\) is the model \(S_{s}, R^{+}_{s}, R^{-}_{s}, V_{s}\):
  \begin{itemize}
  \item \(S_{s} = \{ t \in S \mid R^{\circ}st \}\)
  \item \(R^{+}_{s} = R^{+} \cap S_{s}^{2}\)
  \item \(R^{-}_{s} = R^{-} \cap S_{s}^{2}\)
  \item \(V_{s}(p) = \{t \mid t \in S_{s} \text{ and } p \in t\}\)
  \end{itemize}
\end{definition}

It is straightforward to observe that a point generated canonical model is a generalised model so long as \(R^{\circ}\) is reflexive, transitive, and symmetric.
For, \(R^{+}_{s} \cup R^{-}_{s} = S^{2}_{s}\) iff \(S^{2}_{s}\) is an equivalence relation and \(S_{s}^{2} = R^{\circ}\).

As we are dealing with partial models, showing that \(R^{\circ}\) is an equivalence relation takes some work.
The use of conditional modalities to define a global conditional modality is what allows us to reason about an equivalence relation.
However, as this remains a conditional modality, our proof comes down to checking a number of conditions.

\begin{itemize}
\item Reflexivity:
  \begin{itemize}
  \item Either \(R^{+}ss\) or \(R^{-}ss\)
  \end{itemize}
\item Symmetry:
  \begin{itemize}
  \item If \(R^{+}st\) then either \(R^{+}ts\) or \(R^{-}ts\)
  \item If \(R^{-}st\) then either \(R^{+}ts\) or \(R^{-}ts\)
  \end{itemize}
\item Transitivity:
  \begin{itemize}
  \item If \(R^{+}st\) and \(R^{+}tv\) then either \(R^{+}sv\) or \(R^{-}sv\)
  \item If \(R^{+}st\) and \(R^{-}tv\) then either \(R^{+}sv\) or \(R^{-}sv\)
  \item If \(R^{-}st\) and \(R^{+}tv\) then either \(R^{+}sv\) or \(R^{-}sv\)
  \item If \(R^{-}st\) and \(R^{-}tv\) then either \(R^{+}sv\) or \(R^{-}sv\)
  \end{itemize}
\end{itemize}

Checking all of these conditions is uninspiring.
The only upshot is identifying some interesting axioms to ensure that these are forced by the construction of the canonical model.
Unfortunately the required definition for the accessibility relations on the canonical model only increase the complexity of checking for these conditions, so for now I have only sketched the first instance of the symmetry condition.
I take this to be a good proof of concept for the remaining conditions.

\subsubsection{Canonical model}
\label{sec:canonical-model}

The canonical model if defined in a relatively straightforward way.\nolinebreak
\footnote{
  This builds on \textcite{Jaspars:1996aa}.
  The conditions for the relations are more-or-less straightforward generalisations of those given by \citeauthor{Jaspars:1996aa} in order to deal with antecedent-consequent relation.
}

\begin{definition}[Canonical Model]
  \(\cmodel = (\cmodW,\cmodBox,\cmodWin,\cmodV)\) where:
  \begin{itemize}
  \item \(\cmodW\) is the set of all saturated sets.
  \item \(R^{+}\Gamma\Delta\) iff
    \begin{itemize}
    \item \(\phi \CBox \psi \in \Gamma\) only if \(\psi \in \Delta\) whenever \(\phi \in \Delta\)
    \item \(\psi \in \Delta\) implies \(\top \CDiamond \psi \in \Gamma\)
    \end{itemize}
  \item \(R^{-}\Gamma\Delta\) iff
    \begin{itemize}
    \item \(\phi \CWindow \psi \in \Gamma\) only if \(\lnot\psi \in \Delta\) whenever \(\lnot\phi \in \Delta\)
    \item If \(\lnot\phi \in \Delta\), then \(\bot \CKite \phi \in \Gamma\)
    \end{itemize}
  \item \(V(p, \Gamma) = 1\) iff \(p \in \Gamma\) and \(V(p, \Gamma) = 0\) iff \(\lnot p \in \Gamma\).
  \end{itemize}
\end{definition}

The following lemma is used to make the truth lemma quite straightforward.
The second pair of implications require some care, as we take the negation of any modal formula for the Winow-type modalities.
The definitions hide this, in order to make the quantification more straightforward.

\begin{lemma}\label{lem:modal-existence}
  For any \(\Gamma\), \(\Delta\) in \(\cmodW\).
  \begin{enumerate}[label=(\alph*)]
  \item\label{lemmma:ext:box} If \(\phi \CBox \psi \in \Gamma\) only if \(\psi \in \Delta\) whenever \(\phi \in \Delta\) then there exists a \(\Delta' \subseteq \Delta\) such that \(\Gamma \cmodBox \Delta'\)
  \item\label{lemma:ext:dia} If \(\psi \in \Delta\) implies \(\top \CDiamond \psi \in \Gamma\) %for some \(\phi \in \Delta\)
    then there exists a \(\Delta \subseteq \Delta'\) such that \(\Gamma \cmodBox \Delta'\)
  \item\label{lemma:ext:win} If \(\phi \CWindow \psi \in \Gamma\) only if \(\lnot\psi \in \Delta\) whenever \(\lnot\phi \in \Delta\) then there exists a \(\Delta' \subseteq \Delta\) such that \(\Gamma \cmodBox \Delta'\)
  \item\label{lemma:ext:kit} If \(\psi \in \Delta\) implies \(\bot \CDiamond \lnot\psi \in \Gamma\) %for some \(\phi \in \Delta\)
    then there exists a \(\Delta \subseteq \Delta'\) such that \(\Gamma \cmodBox \Delta'\)
  \end{enumerate}
  \begin{proof}
    Take \(\Gamma,\Delta \in \cmodW\).
    \begin{description}
    \item[\ref{lemmma:ext:box}]
      Assume \(\phi \CBox \psi \in \Gamma\) only if \(\psi \in \Delta\) whenever \(\phi \in \Delta\).
      And, take:
      \begin{itemize}
      \item \(\modcou{\Box}{\Gamma} = \{ \psi \mid \phi \CBox \psi \in \Gamma \text{ and } \phi \in \Delta \}\)
      \item \(\modcou{\Diamond}{\Gamma} = \{\phi \mid \top \CDiamond \phi \in \Gamma\}\)
      \end{itemize}
      Informally, \(\modcou{\Box}{\Gamma}\) consists of all the consequents of conditional modalities which hold at \(\Gamma\) for which the antecedent is true at \(\Delta\).
      Note that as \(\phi \CBox \phi\) for any \(\phi\),\nolinebreak
      \footnote{
        Alternatively, observe that if \(\phi \CBox \psi\) is true then \(\phi \CBox (\phi \land \psi)\) is also true.
      }
      it will also be the case that \(\modcou{\Box}{\Gamma}\) contains all the antecedents of the respective modalities.
      For, suppose \(\psi \in \modcou{\Box}{\Gamma}\) given \(\phi \CBox \psi \in \Gamma\) and \(\phi \in \Delta\).
      Then, it will also be the case that \(\phi \CBox \phi \in \Gamma\), and therefore as \(\phi \in \Delta\), it is also the case that \(\psi \in \modcou{\Box}{\Gamma}\).
      Note also that \(\modcou{\Box}{\Gamma} \subseteq \Delta\).

    Our goal is to show that:
    \begin{enumerate}
    \item For all finite \(\Sigma\): If \(\modcou{\Box}{\Gamma} \vdash \Sigma\) then \(\Sigma \cap \Delta \cap \modcou{\Diamond}{\Gamma} \ne \emptyset\)
    \end{enumerate}
    For, given this we know by proposition~\ref{prop:finiteness} that \(\Delta \cap \modcou{\Diamond}{\Gamma}\) is a saturator of \(\modcou{\Box}{\Gamma}\).
    Then, by lemma~\ref{lindenbaum:left} there must be some saturated \(\Delta^{'}\) such that \(\modcou{\Box}{\Gamma} \subseteq \Delta^{'} \subseteq \Delta \cap \modcou{\Diamond}{\Gamma}\).
    Therefore, as \(\phi \CBox \psi \in \Gamma\) only if \(\psi \in \modcou{\Box}{\Gamma}\) whenever \(\phi \in \modcou{\Box}{\Gamma}\), the same holds for \(\Delta'\), and as \(\Delta' \subseteq \Delta \cap \modcou{\Diamond}{\Gamma}\) we know that \(\phi \in \Delta'\) whenever \(\top \CDiamond \phi \in \Gamma\), thus \(\Gamma R^{+}\Delta'\).

    So, suppose \(\modcou{\Box}{\Gamma} \vdash \Sigma\) for some finite \(\Sigma\).

    % {
    %   \color{red}
    %   If \(\modcou{\Box}{\Gamma} = \emptyset\) then this conditional is immediate, for some \(\sigma \in \Sigma\) is a tautology, and \(\Delta\) contains all tautologies given \(\Delta \in W\), and likewise so does \(\modcou{\Diamond}{\Gamma}\).

    %   Hence, can assume that \(\modcou{\Box}{\Gamma} \ne \emptyset\), and therefore that there is some \(\phi \in \Delta\) etc.\
    % }

    As \(\modcou{\Box}{\Gamma} \subseteq \Delta\) and \(\Delta \in \cmodW\) we have \(\Sigma \cap \Delta \ne \emptyset\).
    Rewriting, we have \(\modcou{\Box}{\Gamma} \vdash \Sigma - \Delta,\Sigma \cap \Delta\), which can be rewritten again as \(\modcou{\Box}{\Gamma} \vdash \sigma, \Sigma \cap \Delta\), where \(\sigma \coloneq \bigvee(\Sigma - \Delta)\).
    Further, given proposition \ref{prop:finiteness} (finiteness) there must be some finite \(\modcou{\Box}{\Gamma}' \subseteq \modcou{\Box}{\Gamma}\) such that \(\modcou{\Box}{\Gamma}' \vdash \sigma, \Sigma \cap \Delta\).
    Taking \(\psi' \coloneq \bigwedge\modcou{\Box}{\Gamma}'\), we then have \(\psi' \vdash \sigma, \Sigma \cap \Delta\).

    By the application of rule \ruleCBoxR\ we obtain \(\psi' \CBox \psi' \vdash \psi' \CBox \sigma, \psi' \CDiamond(\Sigma \cap \Delta)\).\nolinebreak
    \footnote{
      Alternatively, \(\vdash \psi' \CBox \sigma, \Diamond(\Sigma \cap \Delta)\).
    }\(^{,}\)\nolinebreak
    \footnote{
      In the original proof, recovering the box part of \(\Gamma\) is important in order to generate the appropriate modal requirement.
      Here, however, the conditional box modality does the work, as the restrictions on what needs to be the case at all accessible states is now incorporated into the modality, rather than being independently stated at the state of evaluation.
    }
    Therefore, \(\Gamma \vdash \psi' \CBox \sigma, \psi' \CDiamond(\Sigma \cap \Delta)\).

    As \(\Gamma\) is saturated, it must be the case that either \(\psi' \CBox \sigma \in \Gamma\) or \(\psi' \CDiamond(\Sigma \cap \Delta) \cap \Gamma \ne \emptyset\).

    Suppose \(\psi' \CBox \sigma \in \Gamma\).
    Then, as \(\psi' = \bigwedge \modcou{\Box}{\Gamma}'\), and \(\modcou{\Box}{\Gamma}' \subseteq \Psi \subseteq \Delta\) it follows that \(\sigma \in \Delta\).
    Yet,  as \(\Delta\) is also saturated from the previous we would then have \(\phi' \in \Delta\) for some \(\phi' \in \Sigma - \Delta\).
    Therefore, it cannot be the case that \(\psi' \CBox \sigma \in \Gamma\).

    % {
    %   \color{red}
    %   So, get some instance in \(\Gamma\).
    %   Therefore, get that there is some \(\delta\).
    %   Therefore, get that there is some \(X \in \Delta\) such that \(X \CDiamond \delta\).
    %   But then the idea is to show that this shows that there's a diamond for every \(\delta\) in the intersection.
    %   Still, shown that whatever follows just from the box part, then know that can saturate with the diamonds I have.
    %   This then allows me to find some \(X \in \Delta'\) which does the job.
    % }

    Hence, \(\psi' \CDiamond (\Sigma \cap \Delta) \cap \Gamma \ne \emptyset\).
    This is equivalent to \(\Sigma \cap \Delta \cap \modcou{\Diamond}{\Gamma} \ne \emptyset\).

  \item[\ref{lemma:ext:dia}]

    Assume \(\psi \in \Delta\) implies \(\top \CDiamond \psi \in \Gamma\).
    Our goal is to show that there is some \(\Delta'\) such that \(\Delta \subseteq \Delta'\) and:
    \begin{itemize}
    \item if \(\psi \in \Delta'\) then \(\top \CDiamond \psi \in \Gamma\)/
    \item if \(\phi \CBox \psi \in \Gamma\) then \(\psi \in \Delta'\) for some \(\phi \in \Delta'\).
    \end{itemize}

    The latter condition can be established by showing that \(\Delta'\) contains all \(\CBox\) consequents, for then there is no way for the condition to be false.
    For the former condition, need to show that \(\Delta'\) is a subset of all \(\CDiamond\) consequents for which there is some antecedent in \(\Delta'\).

    Let:
    \begin{itemize}
    \item \(\modcou{\Box}{\Gamma} = \{ \psi \mid \phi \CBox \psi \in \Gamma \text{ and } \phi \in \Delta \}\)
    \item \(\modcou{\Diamond}{\Gamma} = \{ \psi \mid \top \CDiamond \psi \in \Gamma \}\)
    \end{itemize}

    Consider \(\modcou{\Box}{\Gamma} \cup \Delta\).
    Intuitively, we are (potentially) expanding \(\Delta\) to include \(\CBox\) consequents from \(\Gamma\) that hold on the basis of some antecedent in \(\Delta\) but are not yet included in \(\Delta\).

    The intermediate plan is to show that \(\modcou{\Diamond}{\Gamma}\) is a saturator of \(\modcou{\Box}{\Gamma} \cup \Delta\).
    This will establish that there is some \(\Delta'\) such that \(\modcou{\Box}{\Gamma} \cup \Delta \subseteq \Delta' \subseteq \modcou{\Diamond}{\Gamma}\)
    Given this, we know that \(\Delta'\) contains all of the relevant \(\CBox\) consequents, and \(\Delta'\) is a subset of the \(\CDiamond\) consequents.
    The remaining task is to show that \(\top \CDiamond \psi \in \Gamma\) for all \(\psi \in \modcou{\Diamond}{\Gamma}\).
    Yet, this will follow immediately from the definition of \(\modcou{\Diamond}{\Gamma}\) and the fact that \(\Delta \subseteq \Delta'\).

    \hozlinedash

    Our main task, then, is to show that \(\modcou{\Diamond}{\Gamma}\) is a saturator of \(\modcou{\Box}{\Gamma}\).
    For, if \(\modcou{\Diamond}{\Gamma}\) is a saturator of \(\modcou{\Box}{\Gamma}\) then by lemma~\ref{lindenbaum:left} there is some saturated set \(\Delta'\) such that \(\modcou{\Box}{\Gamma} \cup \Delta \subseteq \Delta' \subseteq \modcou{\Diamond}{\Gamma}\).

    To do this we show:
    \begin{enumerate}[resume]
    \item For all finite \(\Sigma\): If \(\modcou{\Box}{\Gamma}, \Delta \vdash \Sigma\) then \(\Sigma \cap \modcou{\Diamond}{\Gamma} \ne \emptyset\).
    \end{enumerate}

    Suppose \(\modcou{\Box}{\Gamma}, \Delta \vdash \Sigma\).

    There is some finite \(\Delta' \subseteq \Delta\) such that \(\modcou{\Box}{\Gamma}, \Delta' \vdash \Sigma\).
    Let \(\delta' = \bigwedge \Delta'\) and hence \(\modcou{\Box}{\Gamma}, \delta' \vdash \Sigma\).
    Furthermore, there is finite \(\modcou{\Box}{\Gamma}' \subseteq \modcou{\Box}{\Gamma}\) such that \(\modcou{\Box}{\Gamma}', \delta' \vdash \Sigma\).
    Let \(\gamma' = \bigwedge \modcou{\Box}{\Gamma}\) and hence \(\gamma', \delta' \vdash \Sigma\).

    So we have, \(\gamma', \delta' \vdash \Sigma\).
    And, by \ruleAndL\ we have \(\gamma' \land \delta' \vdash \Sigma\).
    By application of rule \ruleCDiamondR\ we obtain \(\top \CDiamond (\gamma' \land \delta') \vdash \top \CDiamond \Sigma\).

    Our goal is to show that \(\Gamma \vdash \top \CDiamond (\gamma' \land \delta')\).

    Note that for all \(\gamma \in \modcou{\Box}{\Gamma}\) there is some \(\phi \in \Delta\) such that \(\phi \CBox \gamma \in \Gamma\) with \(\phi \in \Delta\).
    So, as \(\phi \in \Delta\) and \(\delta' \in \Delta\) we also know that \(\phi \land \delta' \in \Delta\), from which it follows that \(\top \CDiamond (\phi \land \delta') \in \Gamma\).
    Notice that we now have \(\phi \CBox \gamma \in \Gamma\) and \(\top \CDiamond (\phi \land \delta') \in \Gamma\).
    So, by rule \ruleCWindowPlus\ we know that \(\top \CDiamond (\gamma \land \delta') \in \Gamma\).
    Hence, by repeated applications of \ruleCWindowPlus\ we know that \(\top \CDiamond (\gamma' \land \delta') \in \Gamma\).
    Therefore, as \(\Gamma \vdash \top \CDiamond (\gamma' \land \delta')\), we know that \(\Gamma \vdash \top \CDiamond \Sigma\).

    From the above it follows that \(\Sigma \cap \modcou{\Diamond}{\Gamma} \ne \emptyset\) and hence \(\modcou{\Diamond}{\Gamma}\) is a saturator of \(\modcou{\Box}{\Gamma}\).\nolinebreak
    \footnote{
      The `insight' here is that \ruleCDiamondR\ ensures that the consequence relation is respected by the conditional-diamond modality.
      And, given that we are considering what follows from \(\Delta\) were \(\Delta\) accessible from \(\Gamma\) with the assumption that the conditional-diamond modality is respected, we can use this to ensure that the appropriate consequents also hold with respect to the conditional-diamond modality.
    }
    \end{description}

    The second pair of implications follow the same strategy as the first pair.
  \end{proof}
\end{lemma}


We now establish the standard truth lemma for the canonical model.\nolinebreak
\footnote{If our model were to include right-saturated sets, we would require an additional truth lemma establishing that\(\Gamma \vDash \phi\) iff \(\lnot\phi \in \Gamma\) and \(\Gamma \Dashv \phi\) iff \(\phi \in \Gamma\).}

\begin{lemma}[Truth]
  For all \(\chi \in \olang{}\) and all saturated sets \(\Gamma\):
  \[\Gamma \vDash \chi\text{ iff }\chi \in \Gamma\text{ and }\Gamma \Dashv \chi\text{ iff }\lnot\chi \in \Gamma\]
  \begin{proof}
    By induction on the structure of \(\chi\).

    \begin{description}
    \item[\(\psi \CBox \psi \in \Gamma\)]\mbox{ }
      Suppose \(\psi \CBox \psi \in \Gamma\).
      To show \(\Gamma \vDash \phi \CBox \psi\), take an arbitrary \(\Delta\) such that \(R^{+}\Gamma\Delta\) and assume \(\Delta \vDash \phi\).
      By the induction hypothesis, we know \(\phi \in \Delta\), and therefore by definition of \(R^{+}\) we know that \(\psi \in \Delta\) whence \(\Delta \vDash \psi\).
      Hence, \(\Gamma \vDash \phi \CBox \psi\).

    \item[\(\phi \CBox \psi \notin \Gamma\)]\mbox{ }

      Suppose \(\phi \CBox \psi \notin \Gamma\).
      Our goal is to show that there is some \(\Delta\) such that \(R^{+}\Gamma\Delta\) and \(\Delta \vDash \phi\) but \(\Delta \nvDash \psi\).

      As \(\phi \CBox \psi \notin \Gamma\), we know that \(\phi \nvdash \psi\).
      For, if \(\phi \vdash \psi\) then \(\vdash \phi \CBox \psi\) must hold by (derived) rule \ruleCBoxConq.

      By corollary~\ref{col:saturation} we know that we can find some saturated set \(X\) such that \(\phi \in X\) and \(\psi \notin X\).
      Furthermore, if it is the case that \(\alpha \CBox \beta \in \Gamma\) implies that \(\beta \in X\) whenever \(\alpha \in X\), then by lemma~\ref{lem:modal-existence} there must be some \(X' \subseteq X\) such that \(R^{+}\Gamma X'\).
      Therefore, our goal is to find some \(X\) satisfies this additional constraint.

      Take \(Y = \{\chi \mid \phi \CBox \chi \in \Gamma \}\).
      We know that \(\phi \in Y\), for \(\phi \CBox \phi\) is a tautology.

      Furthermore, if \(Y \vdash \xi\) then by rule \ruleCBoxR\ we know \(\phi \CBox Y \vdash \phi \CBox \xi\), and as \(\Gamma \vdash \phi \CBox Y\) by definition of \(Y\) we can be sure that \(\phi \CBox \xi \in \Gamma\).

      And, we know that if \(\alpha \CBox \beta \in \Gamma\) and \(\alpha \in Y\), then \(\beta \in Y\).
      For, if \(\alpha \in Y\), then \(\phi \CBox \alpha \in \Gamma\), hence \(\phi \CBox \alpha \in \Gamma\) and \(\alpha \CBox \beta \in \Gamma\), whence \(\phi \CBox \beta \in \Gamma\).
      And, by the same observation we know that \(\psi \notin Y\).
      Hence, \(Y \nvdash \psi\).

      Consider any arbitrary \(\alpha \CBox \beta \in \Gamma\) and observe that if \(Y \vdash \alpha\) then \(\phi \CBox \alpha \in \Gamma\) by rule \ruleCBoxR.
      And, then as we have \(\phi \CBox \alpha \in \Gamma\) and \(\alpha \CBox \beta \in \Gamma\) we have \(\phi \CBox \beta \in \Gamma\), whence \(\beta \in Y\).

      So, if \(\alpha \CBox \beta \in Y\), then \(\beta \in Y\) whenever \(\alpha \in Y\).
      \emph{And}, if \(\alpha \CBox \beta \in Y\) and \(\beta \notin Y\) then \(\alpha \notin Y\), which entails that \(Y \nvdash \alpha\).
      Hence, \(Y \nvdash \psi, \{\alpha \mid \alpha \CBox \beta \in \Gamma, \beta \not in Y\}\).\nolinebreak
      \footnote{
        Intuitively, we have partitioned the \(\CBox\) antecedents into those made true when \(\phi\) is true, and those which are not made true when \(\phi\) is true, and noted that that the \(\CBox\) consequents of \(\CBox\) antecedents made true when \(\phi\) is true are made true by virtue of \(\phi\) being true.
      }
      Therefore, \(Y\) satisfies the desired constraint, and so there is some \(Y' \subseteq Y\) such that \(R^{+}\Gamma Y'\) with \(\phi \in Y\) and \(\psi \notin Y'\).
      And so by the induction hypothesis \(Y' \vDash \phi\) but \(Y' \nvDash \psi\), from which it follows that \(\Gamma \nvDash \phi \CBox \psi\).

    \item[\(\lnot(\phi \CBox \psi) \notin \Gamma\)]\mbox{ }

      Suppose \(\lnot(\phi \CBox \psi) \notin \Gamma\).
      Our goal is to show \(\Gamma \nvDash \phi \CBox \psi\).
      Hence, we must show that \(\lnot\exists \Delta(R^{+}\Gamma\Delta, \Delta \vDash \phi, \text{ and } \Delta \Dashv \psi)\).

      We know \(\Gamma \nvdash \top \CDiamond (\phi \land \lnot\psi)\).
      For, if \(\Gamma \vdash \top \CDiamond (\phi \land \lnot\psi)\), then we know \(\Gamma \vdash \phi \CDiamond \lnot\psi\) by rule \ruleDSwitch, and by definition \(\phi \CDiamond \lnot\psi\) just is \(\lnot(\phi \CBox \psi)\).

      Therefore, we know that for all \(\Delta\) such that \(R^{+}\Gamma\Delta\), \((\phi \land \lnot\psi) \notin \Delta\).
      Hence, either \(\phi \notin \Delta\) or \(\lnot\psi \notin \Delta\), whence either \(\Delta \nvDash \phi\) or \(\Delta \nvDash \lnot\psi\) by the induction hypothesis.
      Either way, \(\Delta \nvDash \phi \land \lnot\psi\), and hence it is not the case that \(\Delta \vdash \phi\) and \(\Delta \Dashv \lnot\psi\), and so \(\Gamma \not\Dashv \phi \CBox \psi\).

    \item[\(\lnot(\phi \CBox \psi) \in \Gamma\)]\mbox{ }

      Suppose \(\lnot(\phi \CBox \psi) \in \Gamma\).
      Our goal is to show \(\Gamma \Dashv \phi \CBox \psi\).

      As \(\lnot(\phi \CBox \psi) \in \Gamma\), we know \(\Gamma \vdash \lnot(\phi \CBox \psi)\).
      Rewriting, \(\Gamma \vdash \phi \CDiamond \lnot\psi \), and therefore \(\Gamma \vdash \top \CDiamond (\phi \land \lnot\psi)\).

      Take \(Y = \{\chi \mid (\phi \land \lnot\psi) \CBox \chi \in \Gamma \}\).
      As \((\phi \land \lnot\psi) \CBox (\phi \land \lnot\psi)\) is a tautology, we know that \(\phi \land \lnot\psi \in Y\).

      Suppose \(Y \vdash \Sigma\).
      Then, we know \(Y, \phi \land \lnot\psi \vdash \Sigma\).
      Hence, by rule \ruleCDiamondR\ we know that \((\phi \land \lnot\psi) \CBox Y, \top \CDiamond (\phi \land \lnot\psi) \vdash \top \CDiamond \Sigma\).
      By definition of \(Y\), we know that \((\phi \land \lnot\psi) \CBox Y \subseteq \Gamma\), and we have show that \(\top \CDiamond (\phi \land \lnot\psi) \in \Gamma\).
      Therefore, \(\top \CDiamond \Sigma \subseteq \Gamma\).
      Rewriting, \(\Sigma \cap \{\phi \mid \top \CDiamond \phi \in \Gamma\} \ne \emptyset\), and hence \(\{\phi \mid \top \CDiamond \phi \in \Gamma\}\) is a saturator of \(Y\).
      Hence, lemma~\ref{lindenbaum:left} guarantees the existence of a saturated set \(Y'\) such that \(Y \subseteq Y' \subseteq \{\phi \mid \top \CDiamond \phi \in \Gamma\}\).
      In turn, this means that if \(\phi \in Y'\), then \(\top \CDiamond \phi \in \Gamma\), whence by lemma~\ref{lem:modal-existence} we know there is a \(Y''\) such that \(Y' \subseteq Y''\) with \(R^{+}\Gamma Y''\).

      As \(\phi \land \lnot\psi \in Y''\), we know \(\phi \in Y''\) and \(\lnot\psi \in Y''\), hence \(Y'' \vDash \phi\) and \(Y'' \vDash \lnot\psi\) by the induction hypothesis, from which it follows that \(Y'' \Dashv \psi\).
      So, we have some \(Y''\) such that \(R^{+}\Gamma Y''\) with \(Y'' \vDash \phi\) and \(Y'' \Dashv \psi\), and therefore \(\Gamma \Dashv \phi \CBox \psi\).

      % {
      %   \color{green}
      %   The idea here is to take \(\phi\), and then collect together all of the other antecedents that are true due to \(\phi\).
      %   Then, know that no other antecedent is true.
      %   And, \(\psi\) is not true.
      %   Then, when \(\Delta\) is built, it doesn't make any additional antecedents true.
      %   The fact that \(\psi\) doesn't hold is because \(\phi \CBox \chi\) and \(\chi \CBox \psi\) entails \(\phi \CBox \psi\).
      % }
    \end{description}
  \end{proof}
\end{lemma}

Our final task is to show that \(R^{+} \cup R^{-}\) forms an equivalence relation.
This is a matter of providing appropriate axioms, and the first case of symmetry is presented below to demonstrate how this would be done.

\begin{lemma}
  If \(\Gamma R^{+} \Delta\) then either \(\Delta R^{+} \Gamma\) or \(\Delta R^{-} \Gamma\).
  \begin{proof}
    Assume \(\Gamma R^{+} \Delta\).
    Therefore:
    \begin{itemize}
    \item \(\phi \CBox \psi \in \Gamma\) only if \(\psi \in \Delta\) whenever \(\phi \in \Delta\), and
    \item \(\psi \in \Delta\) implies \(\top \CDiamond \psi \in \Gamma\).
    \end{itemize}

    Cases.
    If it is not the case that \(\Delta R^{+} \Gamma\) then \(\Delta R^{-} \Gamma\), and if it is not the case that \(\Delta R^{-} \Gamma\) then \(\Delta R_{+} \Gamma\).

    Suppose it is not the case that \(\Delta R^{+} \Gamma\).
    Then, either
    \begin{itemize}
    \item There is some \(\phi' \CBox \psi' \in \Delta\) such that \(\psi' \in \Gamma\) but \(\phi' \notin \Gamma\), or
    \item \(\psi' \in \Gamma\) but \(\top \CDiamond \psi' \notin \Delta\).
    \end{itemize}

    \begin{description}
    \item[\textbf{Former}]\mbox{ }

      Assume there is some \(\phi' \CBox \psi \in \Delta\) such that \(\psi' \notin \Gamma\) but \(\phi' \in \Gamma\).

      Goal is to show \(\Delta R^{-} \Gamma\):
      \begin{enumerate}
      \item \(\phi \CWindow \psi \in \Delta\) only if \(\lnot\psi \in \Gamma\) whenever \(\lnot\phi \in \Gamma\)
      \item If \(\lnot\phi \in \Gamma\), then \(\bot \CKite \phi \in \Delta\).
      \end{enumerate}

      By assumption, we know that there is some \(\phi' \CBox \psi \in \Delta\) such that \(\psi' \notin \Gamma\) but \(\phi' \in \Gamma\).

      \begin{description}
      \item[1.]\mbox{ }

        Take \(\phi \CWindow \psi \in \Delta\) such that \(\lnot\phi \in \Gamma\). Our task is to show that \(\lnot\psi \in \Gamma\).

        By appealing to both assumptions we have \(\Delta \vdash \phi' \CBox \psi'\), and \(\Delta \vdash \phi \CWindow \psi\).

        Therefore, by rule \ruleCBoxWindowGlobal\ we have \(\Delta \vdash (\phi' \land \lnot\phi \CGlobal (\psi' \lor \lnot\psi))\).

        Hence, \(\Delta \vdash (\phi' \land \lnot\phi) \CGlobal (\psi' \lor \lnot\psi)\).

        Therefore, \(\top \CDiamond ((\phi' \land \lnot\phi) \CGlobal (\psi' \lor \lnot\psi)) \in \Gamma\).

        So, \(((\phi' \land \lnot\phi) \CGlobal (\psi' \lor \lnot\psi)) \in \Gamma\) by rule \ruleDGE.

        And, therefore, as \(\phi' \land \lnot\phi \in \Gamma\), either \(\psi' \in \Gamma\) or \(\lnot\psi \in \Gamma\). By assumption, \(\psi' \notin \Gamma\) and therefore \(\lnot\psi \in \Gamma\).

      \item[2.]\mbox{ }

        Assume \(\lnot\phi \in \Gamma\).

        Again \(\Delta \vdash \phi' \CBox \psi'\).

        Therefore, by \ruleP\ we have \(\Delta \vdash \bot \CKite \psi, (\phi' \land \lnot\psi) \CGlobal \psi'\).

        Assume, \(\Delta \vdash (\phi' \land \lnot\psi) \CGlobal \psi'\).
        Then it follows that \(\Gamma \vdash \top \CDiamond ((\phi' \land \lnot\psi) \CGlobal \psi')\).
        Hence, by rule \ruleDGE\ we have \(\Gamma \vdash (\phi' \land \lnot\psi) \CGlobal \psi'\).
        As \(\lnot\phi \in \Gamma\) and \(\phi' \in \Gamma\) we know \(\Gamma \vdash \lnot\phi \land \phi'\).
        Therefore, as \(\Gamma \vdash \lnot\phi \land \phi'\) and \(\Gamma \vdash (\phi' \land \lnot\psi) \CGlobal \psi'\) we have by rule \ruleGE\ that \(\Gamma \vdash \phi'\).
        From this it follows that \(\phi' \in \Gamma\), contradicting our assumption that there is some \(\phi' \CBox \psi' \in \Delta\) such that \(\psi' \in \Gamma\) but \(\phi' \notin \Gamma\).
          So, it must be the case that \(\Delta \vdash \bot \CKite \psi\).
      \end{description}

    \item[\textbf{Latter}]\mbox{ }

      Assume \(\psi' \in \Gamma\) but \(\top \CDiamond \psi' \notin \Delta\).

      Goal is to show \(\Delta R^{-} \Gamma\):
      \begin{enumerate}
      \item \(\phi \CWindow \psi \in \Delta\) only if \(\lnot\psi \in \Gamma\) whenever \(\lnot\phi \in \Gamma\)
      \item If \(\lnot\phi \in \Gamma\), then \(\bot \CKite \phi \in \Delta\).
      \end{enumerate}

      By assumption, we know that there is some \(\phi' \CBox \psi \in \Delta\) such that \(\psi' \notin \Gamma\) but \(\phi' \in \Gamma\).

      Hence, \(\Delta \vdash \phi' \CBox \psi'\), and \(\Delta \vdash \phi \CWindow \psi\).

      \begin{description}

      \item[1.]

        Assume \(\phi \CWindow \psi \in \Delta\).
        Hence, \(\Delta \vdash \phi \CWindow \psi\) and so by rule \rulePP\ we know that \(\Delta \vdash \top \CDiamond \psi', (\lnot\phi \land \psi') \CGlobal \lnot\psi\).
        From our assumption it follows immediately that \(\Delta \vdash (\lnot\phi \land \psi') \CGlobal \lnot\psi\).
        Therefore, \(\Gamma \vdash \top \CDiamond ((\lnot\phi \land \psi') \CGlobal \lnot\psi)\), and hence \(\Gamma \vdash (\lnot\phi \land \psi') \CGlobal \lnot\psi\).
        Therefore, if \(\Gamma \vdash \lnot\phi\), then we know \(\Gamma \vdash \lnot\phi \land \psi'\), from which it follows that \(\Gamma \vdash \lnot\psi\).

      \item[2.]

        Assume \(\lnot\phi \in \Gamma\).
        Our goal is to show that \(\bot \CKite \phi \in \Delta\).
        As \(\Gamma \vdash \lnot\phi\) and \(\Gamma \vdash \psi'\) we have \(\Gamma \vdash \lnot\phi \land \psi'\)

        So, by rule \ruleGDiamond\ we have that \(\Gamma \vdash \top \CGlobal (\top \CDiamond (\lnot\phi \land \psi')) \lor (\bot \CKite \lnot(\lnot\phi \land \psi'))\).
        And, therefore \(\Delta \vdash \top \CGlobal (\top \CDiamond (\lnot\phi \land \psi')) \lor (\bot \CKite \lnot(\lnot\phi \land \psi'))\).
        So, by rule \ruleGE\ we know that \(\Delta \vdash (\top \CDiamond (\lnot\phi \land \psi')) \lor (\bot \CKite \lnot(\lnot\phi \land \psi'))\).

        Suppose \(\Delta \vdash \top \CDiamond (\lnot\phi \land \psi'))\).
        Then by rule \ruleDiamondW\ we obtain \(\Delta \vdash \top \CDiamond \psi')\).
        Yet, we have assumed that \(\Delta \nvdash \top \CDiamond \psi'\).
        Hence, \(\Delta \vdash \bot \CKite \lnot(\lnot\phi \land \psi')\).
        Rewriting, we obtain \(\Delta \vdash \bot \CKite (\phi \lor \lnot\psi')\), and therefore by \ruleKiteW\ we have \(\Delta \vdash \bot \CKite \phi\)
      \end{description}

      At this point we have shown that if \(\Gamma R^{+} \Delta\) then, if it is not the case that \(\Delta R^{+} \Gamma\) then it is the case that \(\Delta R^{-} \Gamma\).
    \end{description}

  \end{proof}
\end{lemma}


\newpage

\hfill
\printbibliography


\end{document}